<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
<meta name="viewport"
	content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, target-densitydpi=medium-dpi" />

<title>Insert title here</title>

<link rel="stylesheet"
	href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
<link rel="stylesheet"
	href="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.css" />
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script
	src="http://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
<!-- <script src="//code.jquery.com/ui/1.11.3/jquery-ui.js"></script> -->
<script src="js/jquery.touchSwipe.min.js"></script>

<script type="text/javascript"
	src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<script type="text/javascript" src="./js/php.js"></script>
<script type="text/javascript" src="./js/matrix_class.js"></script>
<!-- bxslider -->
<!-- bxSlider Javascript file -->
<script src="./js/jquery.bxslider.min.js"></script>
<!-- bxSlider CSS file -->
<link href="./css/jquery.bxslider.css" rel="stylesheet" />
<!-- end bxslider -->
<link href="./css/style_jquery_mobile.css" rel="stylesheet"
	type="text/css" />

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  messageStyle: "none"
});
</script>
</head>
<body>
	<div data-role="page" data-theme="a">
		<!-- begin main menu -->
		<div id="main" data-role="panel" data-display="reveal">
			<ul data-role="listview">
				<li><a id="Gauss" onclick="getInput(this);">Gauss
						elimination</a></li>
				<li><a id="Gauss-Jordan" onclick="getInput(this);">Gauss-Jordan
						elimination</a></li>
				<li><a id="findDet" onclick="getInput(this);">Determinant</a></li>
				<li><a id="inverse" onclick="getInput(this);">Inverse</a></li>
				<li><a id="refresh" class="ui-icon-refresh"
					onclick="getInput(this);">Refresh</a></li>
			</ul>
		</div>
		<!-- end main menu -->

		<!-- begin head banner -->
		<div id="banner" data-role="header">
			<h1 role="heading" class="ui-title">Matrix Calculator</h1>
			<a href="#main"
				class="jqm-navmenu-link ui-nodisc-icon ui-alt-icon ui-btn-left ui-btn ui-icon-bars ui-btn-icon-notext ui-corner-all"
				data-role="button" role="button">Menu</a>
		</div>
		<!-- end head banner -->

		<!-- begin main content -->
		<div role="main" class="ui-content">

			<div id="containter">
				<h2 id="operation_title">Gauss Elimination</h2>
				<hr />
				<!-- begin input form -->
				<div id="inputDiv">
					<form id="dimensionForm">
						<div class="ui-grid-solo" id="num_rows_container">
							<div class="ui-block-a" style="height: 60px; line-height: 60px;">
								<input type="number" class="dimension" max="10" id="num_rows"
									placeholder="Rows" />
							</div>
						</div>
						<span id="times">\(\times\)</span>
						<div class="ui-grid-solo" id="num_cols_container">
							<div class="ui-block-a" style="height: 60px; line-height: 60px;">
								<input type="number" class="dimension" id="num_cols" max="10"
									placeholder="Columns" />
							</div>
						</div>
						<div class="ui-grid-a" id="augmented_cols_container">
							<div class="ui-block-a"
								style="text-align: left; height: 60px; line-height: 60px;">
								<label for="augmented_cols">Augmented Columns</label>
							</div>
							<div class="ui-block-b" style="height: 60px; line-height: 60px;">
								<input type="number" class="dimension" id="augmented_cols"
									placeholder="Augmented Cols" />
							</div>
						</div>
						<div class="ui-grid-a" id="rdmEntries_container">
							<div class="ui-block-a"
								style="text-align: left; height: 60px; line-height: 60px;">
								<label for="rdmEntries">Random entries:</label>
							</div>
							<div class="ui-block-b" style="height: 60px; line-height: 60px;">
								<select id="rdmEntries" data-role="flipswitch">
									<option value="0">Off</option>
									<option value="1" selected>On</option>
								</select>
							</div>
						</div>
						<a
							class="ui-btn ui-shadow ui-corner-all ui-btn-inline ui-btn-mini"
							id="setDim" onclick="setDimension()">Set Dimensions</a> <input
							type="hidden" id="operation" value="Gauss" />
					</form>
					<div id="matrix_entries_container" class="hidden">
						<div id="matrix_entries"></div>
						<div class="ui-grid-a">
							<div class="ui-block-a">
								<button id="modifyDim"
									class="ui-btn ui-icon-carat-l ui-btn-icon-left ui-shadow ui-corner-all">Back</button>
							</div>
							<div class="ui-block-b">
								<button
									class="ui-btn ui-icon-carat-r ui-btn-icon-right ui-shadow ui-corner-all"
									onclick="doCompute();">Compute</button>
							</div>
						</div>
						<script type="text/javascript">
							$("#modifyDim").click(function(event) {
								event.preventDefault();
								$("#dimensionForm").show();
								$("#matrix_entries_container").hide();
								$("#computeDiv").hide();
							});
						</script>
					</div>
				</div>
				<!-- end input form -->
				<div id="computeDiv" class="hidden">
					<div id="outputDiv">
						<div id="slider" class="bxslider"></div>
					</div>
				</div>
				<div data-role="footer" data-position="fixed"
					class="text-align:center;">
					<div id="StepCtrl">
						<!-- 						<div class="ui-grid-c" style="padding-left: 1em; padding-right: 1em;"> -->
						<!-- 							<div class="ui-block-a"> -->
						<!-- 								<a class="ui-btn ui-shadow ui-corner-all" id="first">First</a> -->
						<!-- 							</div> -->
						<!-- 							<div class="ui-block-b"> -->
						<!-- 								<a class="ui-btn ui-shadow ui-corner-all" id="previous">Prev</a> -->
						<!-- 							</div> -->
						<!-- 							<div class="ui-block-c"> -->
						<!-- 								<a class="ui-btn ui-shadow ui-corner-all" id="next">Next</a> -->
						<!-- 							</div> -->
						<!-- 							<div class="ui-block-d"> -->
						<!-- 								<a class="ui-btn ui-shadow ui-corner-all" id="last">Last</a> -->
						<!-- 							</div> -->
						<!-- 						</div> -->
						<!-- 						<div class="ui-grid-a" style="padding-left: 1em; padding-right: 1em;"> -->
						<!-- 							<div class="ui-block-a"> -->
						<!-- 								<button -->
						<!-- 									class="ui-btn ui-shadow ui-corner-all ui-icon-carat-l ui-btn-icon-left" -->
						<!-- 									id="modifyEntries">Modify</button> -->
						<!-- 							</div> -->
						<!-- 							<div class="ui-block-b"> -->
						<!-- 								<button -->
						<!-- 									class="ui-btn ui-shadow ui-corner-all ui-icon-refresh ui-btn-icon-right" -->
						<!-- 									id="startOver">Start Over</button> -->
						<!-- 							</div> -->
						<!-- 						</div> -->
					</div>
				</div>
			</div>

			<script type="text/javascript" src="./js/doCompute.js"></script>
			<script type="text/javascript">
				function getInput(element) {
					$("#main").panel("close");
					$("#operation_title").html($(element).html());
					$("#inputDiv").show();
					$("#dimensionForm").show();
					$("#matrix_entries_container").hide();

					var sOptName = $(element).attr("id");

					switch (sOptName) {
					case "Gauss":
						$("#times").show();
						$("#num_cols").show();
						$("#augmented_cols").val("");
						$("#augmented_cols_container").show();
						break;
					case "Gauss-Jordan":
						$("#times").show();
						$("#num_cols").show();
						$("#augmented_cols").val("");
						$("#augmented_cols_container").show();
						break;
					case "findDet":
						$("#times").hide();
						$("#num_cols").hide();
						$("#num_cols").val($("#num_rows").val());
						$("#augmented_cols").val("0");
						$("#augmented_cols_container").hide();
						break;
					case "inverse":
						$("#times").hide();
						$("#num_cols").hide();
						$("#num_cols").val($("#num_rows").val());
						$("#augmented_cols").val("0");
						$("#augmented_cols_container").hide();
						break;
					case "refresh":
						location.reload();
						break;
					break;
				}

				$("#inputDiv").show();
				$("#operation").val(sOptName);
				$("#computeDiv").hide();
			}
			var bxSlider = $("#slider")
					.bxSlider(
							{
								infiniteLoop : false,
								pager : false,
								mode : (window.innerWidth < window.innerHeight) ? 'vertical'
										: 'horizontal',
								minSlides : 2
							});
			function doCompute() {
				//	hide input and show output
				$("#inputDiv").hide();
				$("#slider").empty();
				$("#computeDiv").show();

				//	read the matrix from input 
				num_rows = $("#num_rows").val();
				num_cols = $("#num_cols").val();
				augmented_cols = $("#augmented_cols").val();

				var aMatrix = [];
				var aInputMatrix = $("input[name='entries\\[\\]']");

				for (row = 1; row <= num_rows; row++) {
					aMatrix[row] = [];
					for (col = 1; col <= num_cols; col++) {
						aMatrix[row][col] = aInputMatrix.eq(
								(row - 1) * num_cols + (col - 1)).val();
					}
				}

				//	new matrix object
				objMatrix = new matrix(aMatrix, augmented_cols);

				//	display the matrix in output div
				//writeOutputToElement("original_matrix",objMatrix.displayEntries());		

				//what operation	
				switch ($("#operation").val()) {
				case "Gauss":
					writeOutputToElement("computation_result", objMatrix
							.doGauss(), "step");
					break;
				case "Gauss-Jordan":
					writeOutputToElement("computation_result", objMatrix
							.doGaussJordan(), "step");
					break;
				case "findDet":
					writeOutputToElement("computation_result", objMatrix
							.findDet(), "step");
					break;
				case "inverse":
					writeOutputToElement("computation_result",
							inverse(objMatrix.entries), "step");
				}
				bxSlider.reloadSlider();
				//initSlider();
				//$("#step1").show();
			};
			</script>

		</div>
		<!-- end main content -->

	</div>
</body>
</html>
