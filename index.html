<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
 <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, target-densitydpi=device-dpi" />

<title>Insert title here</title>

<link href="css/style.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/javascript" src="js/php.js"></script>
<script type="text/javascript" src="js/matrix_class.js"></script>
</head>
<body>
<div id="containter">
<!-- begin main menu -->
<div id="main">
<div class="menu" id="Gauss" onclick="getInput(this)">Gauss elimination</div>
<div class="menu" id="Gauss-Jordan" onclick="getInput(this)">Gauss-Jordan elimination</div>
<div class="menu" id="findDet" onclick="getInput(this)">Determinant</div>
<div class="menu" id="inverse" onclick="getInput(this)">Inverse</div>
</div>
<!-- end main menu -->

<!-- begin input form -->
<div id="inputDiv" class="hidden">
<form name="frmMatrix" id="frmMatrix" method="post" action="doCompute.html">
<input type="text" name="num_rows" id="num_rows" class="entry" value="1"/>\(\times\)<input type="text" name="num_cols" id="num_cols" class="entry" value="1"/><br/>
<input type="text" name="augmentedCols" id="augmentedCols" placeholder="augmented columns"/><br/>
<button type="button" id="btnSetDim">Set dimension</button>
<input type="hidden" id="operation"/>
<div id="matrix_entries">
</div>
<!-- end input form -->
<a id="compute" onclick="doCompute()">Compute</a>
</form>
</div>
<div id="computeDiv" class="hidden">
	<div id="outputDiv" > 
	<div id="slider"></div>
	</div>
<div id="StepCtrl">
<a id="first"> First </a><a id="previous">Prev</a>
<a id="goBack">Back</a><a id="next">Next</a><a id="last">Last</a>
</div>
</div>
<div class="menu" id="reload">Reload</div>

</div>

<script type="text/javascript" src="js/doCompute.js"></script>
<script type="text/javascript">
$("#reload").click(function(){
	location.reload();
});

function getInput(element){
	$(element).siblings().hide();
	$("#inputDiv").show();
	$("#operation").val($(element).attr("id"));
	$("#computeDiv").hide();
	if ($(element).attr("id")=="findDet"||$(element).attr("id")=="inverse"){
		$("#augmentedCols").val("0");
		$("#augmentedCols").hide();
	}
	//doCompute(element);
}
function doCompute(){
//	hide input and show output
	$("#inputDiv").hide();
	$("#computeDiv").show();
	
	//	read the matrix from input 
	num_rows=$("#num_rows").val();
	num_cols=$("#num_cols").val();
	augmented_cols =$("#augmentedCols").val();	
	

	var aMatrix = [];
	var aInputMatrix = $("input[name='entries\\[\\]']");
	
	for (row=1;row<=num_rows;row++)
	{
		aMatrix[row]=[];	
		for (col=1;col<=num_cols;col++)
		{
			aMatrix[row][col]=aInputMatrix.eq((row-1)*num_cols+(col-1)).val();
		}
	}	
	
	//	new matrix object
	objMatrix = new matrix(aMatrix,augmented_cols);	
	
	//	display the matrix in output div
	writeOutputToElement("original_matrix",objMatrix.displayEntries());		
	
	//what operation
	
	switch ($("#operation").val()){
		case "Gauss":
			writeOutputToElement("computation_result",objMatrix.doGauss(),"step");
			break;
		case "Gauss-Jordan":
			writeOutputToElement("computation_result",objMatrix.doGaussJordan(),"step");
			break;
		case "findDet":
			writeOutputToElement("computation_result",objMatrix.findDet(),"step");
			break;
		case "inverse":
			writeOutputToElement("computation_result",inverse(objMatrix.entries),"step");
	}
	initSlider();
};
</script>
</body>
</html>
