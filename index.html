<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
 <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, target-densitydpi=medium-dpi" />

<title>Insert title here</title>

<link href="./css/style.css" rel="stylesheet" type="text/css"/>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.2/themes/smoothness/jquery-ui.css" />
<script type="text/javascript" src="http://code.jquery.com/jquery-2.1.3.min.js"></script>
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript" src="./js/php.js"></script>
<script type="text/javascript" src="./js/matrix_class.js"></script>
</head>
<body>
<!-- main menu icon -->
<div id="menu_icon" >
	<div onclick="$('#main').toggle('show');">***</div>
	<!-- begin main menu -->
	<div id="main">
	<div class="menu" id="Gauss" onclick="getInput(this)">Gauss elimination</div>
	<div class="menu" id="Gauss-Jordan" onclick="getInput(this)">Gauss-Jordan elimination</div>
	<div class="menu" id="findDet" onclick="getInput(this)">Determinant</div>
	<div class="menu" id="inverse" onclick="getInput(this)">Inverse</div>
	</div>
	<!-- end main menu -->
</div>
<!-- end main menu icon -->
<div id="containter">
	<h1 id="operation_title"></h1>
	<!-- begin input form -->
	<div id="inputDiv">
		<div id="dimensionForm">	
			<input type="number" max="10" id="num_rows" placeholder="Rows"/><span id="times">\(\times\)</span>
			<input type="number" id ="num_cols" max="10" placeholder="Columns"/><br/>
			<input type="number" id="augmented_cols" placeholder="Augmented Cols"/><br/>
			<a id="setDim" onclick="setDimension()">Set Dimensions</a>			
		</div>		
		<div id="matrix_entries" class="hidden">
		</div>
		<input class="hidden" id="operation"/>
	</div>
	<!-- end input form -->
	<div id="computeDiv" class="hidden">
		<div id="outputDiv" > 
			<div id="slider"></div>
		</div>
		<div id="StepCtrl">
			<a id="first">First</a><a id="previous">Prev</a>
			<a id="goBack">Back</a><a id="next">Next</a><a id="last">Last</a>
		</div>
	</div>
</div>

<script type="text/javascript" src="./js/doCompute.js"></script>
<script type="text/javascript">
function getInput(element){
	$("#main").toggle("show");
	$("#operation_title").html($(element).html());
	$("#inputDiv").show();
	$("#dimensionForm").show();
	$("#matrix_entries").hide();

	var sOptName=$(element).attr("id");
	
	switch (sOptName){
		case "Gauss":
			$("#times").show();
			$("#num_cols").show();
			$("#augmented_cols").val("");
			$("#augmented_cols").show();
			break;
		case "Gauss-Jordan":
			$("#times").show();
			$("#num_cols").show();
			$("#augmented_cols").val("");
			$("#augmented_cols").show();
			break;
		case "findDet":
			$("#times").hide();
			$("#num_cols").hide();
			$("#num_cols").val($("#num_rows").val());
			$("#augmented_cols").val("0");
			$("#augmented_cols").hide();		
			break;
		case "inverse":
			$("#times").hide();
			$("#num_cols").hide();
			$("#num_cols").val($("#num_rows").val());
			$("#augmented_cols").val("0");
			$("#augmented_cols").hide();		
		break;
	}

	$("#inputDiv").show();
	$("#operation").val($(element).attr("id"));
	$("#computeDiv").hide();
}

function doCompute(){
//	hide input and show output
	$("#inputDiv").hide();
	$("#slider").empty();
	$("#computeDiv").show();
	
	//	read the matrix from input 
	num_rows=$("#num_rows").val();
	num_cols=$("#num_cols").val();
	augmented_cols =$("#augmented_cols").val();	
	

	var aMatrix = [];
	var aInputMatrix = $("input[name='entries\\[\\]']");
	
	for (row=1;row<=num_rows;row++)
	{
		aMatrix[row]=[];	
		for (col=1;col<=num_cols;col++)
		{
			aMatrix[row][col]=aInputMatrix.eq((row-1)*num_cols+(col-1)).val();
		}
	}	
	
	//	new matrix object
	objMatrix = new matrix(aMatrix,augmented_cols);	
	
	//	display the matrix in output div
	writeOutputToElement("original_matrix",objMatrix.displayEntries());		
	
	//what operation	
	switch ($("#operation").val()){
		case "Gauss":
			writeOutputToElement("computation_result",objMatrix.doGauss(),"step");
			break;
		case "Gauss-Jordan":
			writeOutputToElement("computation_result",objMatrix.doGaussJordan(),"step");
			break;
		case "findDet":
			writeOutputToElement("computation_result",objMatrix.findDet(),"step");
			break;
		case "inverse":
			writeOutputToElement("computation_result",inverse(objMatrix.entries),"step");
	}
	$("#step1").show();
};
</script>
</body>
</html>
